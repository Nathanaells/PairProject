<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Tracker - Home</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f4f7fb;
      margin: 0;
      padding: 0;
    }

    .navbar {
      background-color: #03A9F4;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar ul {
      list-style: none;
      display: flex;
      gap: 15px;
      margin: 0;
      padding: 0;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      font-weight: 500;
    }

    .container {
      width: 80%;
      margin: 30px auto;
    }

    .profile-card, .notes {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    .notes ul {
      list-style-type: disc;
      padding-left: 20px;
    }

    .actions {
      text-align: center;
    }

    .btn {
      background-color: #03A9F4;
      color: white;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 8px;
      text-decoration: none;
      transition: background-color 0.3s;
      display: inline-block;
    }

    .btn:hover {
      background-color: #43a047;
    }

    table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

th, td {
  padding: 12px 15px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: #03A9F4;
  color: white;
  text-transform: uppercase;
  font-size: 14px;
  letter-spacing: 0.05em;
}

tr:hover {
  background-color: #f1f9ff;
}

.btn.small {
  padding: 6px 12px;
  font-size: 14px;
}

  </style>
</head>
<body>


  <header class="navbar">
    <h1>Selamat Datang <%= data.username %> ðŸ‘‹</h1>
    <nav>
      <ul>
        <li><a href="/logout">Logout</a></li>
      </ul>
    </nav>
  </header>
  <% if (msg) { %>
     <h4 style="color: red; text-align: center;">Catatan <%= msg %> telah dihapus </h4>
<% } %>

  <main class="container">
    <section class="profile-card">
      <% if (data.Profile) { %>
        <h2>Profile</h2>
        <p><strong>Nama:</strong> <%= data.username %></p>
        <p><strong>Usia:</strong> <%= setYear(data.Profile.age) %></p>
        <p><strong>Berat Badan:</strong> <%= setWeigth(data.Profile.weigth) %></p>
        <p><strong>Tinggi Badan:</strong> <%= setHeigth(data.Profile.heigth) %></p>  
        <a class="btn" href="/home/editProfile/<%= data.Profile.id %>">Edit</a>

        <% } else { %>
         <H1>Belum Ada Profil!</H1>
         <a class="btn" href="/home/addProfile">Isi Profil</a>
      <% } %>
    </section>

    <section class="notes">
      <% if (data.HealthRecords.length) { %>
        <h2>Catatan Harian</h2>
        
        <table>
          <thead>
            <tr>
              <th>Tanggal</th>
              <th>Tekanan Darah</th>
              <th>Kadar Gula</th>
              <th>Catatan</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <% data.HealthRecords.forEach(el => { %>
              <tr>
                <td><%= el.setDate %></td>
                <td><%= el.setBloodPressure %></td>
                <td><%= el.setSugarLevel %></td>
                <td><%= el.note || '-' %></td>
                <td>
                  <a class="btn small" href="/healthrecords/<%= el.id %>/addNote">Tambah Catatan</a>
                  <a class="btn small" href="/healthrecords/<%= el.id %>/delete">Hapus</a>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
    
        <div style="text-align:center; margin-top:20px;">
          <a class="btn" href="/home/addHR">Tambahkan Health Record Baru</a>
        </div>
    
      <% } else { %>
        <h2>Belum Ada Catatan!</h2>
        <a class="btn" href="/home/addHR">Tambahkan Health Record Baru</a>
      <% } %>
    </section>
    
    <section class="actions">
      <a href="/activities" class="btn">Lihat Activity</a>
      <a href="/health-report" target="_blank" class="btn">Lihat Report</a>

    </section>
  </main>

</body>
</html>
